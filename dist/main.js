(()=>{"use strict";const e=e=>"fio"===e.name?""!==e.value.replace(/([a-zА-Я]+\s?)+/gi,"")||""===e.value:"phone"===e.name?""!==e.value.replace(/\+?\d{10,16}/g,"")||""===e.value:void 0,t=({formId:t,someElem:n=[]})=>{const o=document.getElementById(t),a=document.createElement("div"),l=document.createElement("div");try{if(!o)throw new Error("Положи форму на место, а не сайт(!)");o.addEventListener("submit",(t=>{t.preventDefault(),(()=>{const t=o.querySelectorAll("input"),c=new FormData(o),r={};var s;a.innerHTML="",l.classList.add("lds-ellipsis"),l.innerHTML="<div></div><div></div><div></div><div></div>",a.append(l),a.style.color="#000",o.append(a),c.forEach(((e,t)=>{r[t]=e})),n.forEach((e=>{try{const t=document.getElementById(e.id);"block"===e.type?r[e.id]=t.textContent:"input"===e.type&&(r[e.id]=t.value)}catch(e){console.log("Cловили! Это не страница с калькулятором")}})),(t=>{let n=!0;return t.forEach((t=>{e(t)&&(n=!1)})),n})(t)?(s=r,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((e=>{a.innerHTML="",a.innerHTML="Спасибо, заявка принята! <br>Наш менеджер скоро свяжется с Вами",t.forEach((e=>{e.value=""}))})).catch((e=>{a.innerHTML="",a.textContent="Ошибка отправки"})):(alert("В форму введены не все данные или допущены ошибки"),a.textContent="")})()}))}catch(e){console.error(e.message)}};(()=>{const e=document.querySelector(".col-sm-12 > .button"),t=document.querySelectorAll('[title="Close"]'),n=document.getElementById("services"),o=document.querySelector(".header-modal"),a=document.querySelector(".services-modal"),l=document.querySelector(".overlay"),c=e=>{e.style.display="block",l.style.display="block"},r=e=>{e.style.display="none",l.style.display="none"};e.addEventListener("click",(()=>c(o))),n.addEventListener("click",(e=>{e.target.classList.contains("btn-success")&&c(a)})),t.forEach((e=>{e.addEventListener("click",(e=>{e.target.classList.contains("header-modal__close")&&r(o),e.target.classList.contains("services-modal__close")&&r(a)}))}))})(),console.log("two!!!"),document.querySelectorAll("input").forEach((t=>{t.addEventListener("input",(n=>{e(n.target)?t.classList.add("error"):(t.classList.remove("error"),t.classList.add("correct"))}))}));const n=document.querySelectorAll(".countdown");0!==n.length&&n.forEach((e=>{((e,t)=>{const n=e.querySelector(".count_1 > span"),o=e.querySelector(".count_2 > span"),a=e.querySelector(".count_3 > span"),l=e.querySelector(".count_4 > span");let c,r={};const s=e=>e<10?e="0"+e:e;null!==localStorage.getItem("timeMemo")?(r=JSON.parse(localStorage.getItem("timeMemo")),n.textContent=s(r.days),o.textContent=s(r.hours),a.textContent=s(r.minutes),l.textContent=s(r.seconds)):r={},c=setInterval((function(){let e=(()=>{let e=(new Date(t).getTime()-(new Date).getTime())/1e3,n=Math.floor(e/86400),o=Math.floor(e/60/60%24),a=Math.floor(e/60%60),l=Math.floor(e%60);return localStorage.clear(),localStorage.setItem("timeMemo",JSON.stringify({days:n,hours:o,minutes:a,seconds:l})),{timeRemaining:e,days:n,hours:o,minutes:a,seconds:l}})();e.timeRemaining>0?(n.textContent=s(e.days),o.textContent=s(e.hours),a.textContent=s(e.minutes),l.textContent=s(e.seconds)):(n.textContent="00",o.textContent="00",a.textContent="00",l.textContent="00",clearInterval(c))}),1e3)})(e,"29 december 2021 23:30:00")})),document.body.classList.contains("balkony")&&(()=>{const e=document.querySelector("#calc > .container"),t=document.getElementById("calc-type"),n=document.getElementById("calc-type-material"),o=document.getElementById("calc-input"),a=document.getElementById("calc-total");e.addEventListener("input",(e=>{e.target!==t&&e.target!==n&&e.target!==o||(e.target===o?e.target.value=e.target.value.replace("/D/g",""):e.target.value,(()=>{let e=0;const l=+o.value,c=+t.value,r=+n.value;e=c&&r?l*c*r:0,(({timing:e,draw:t,duration:n})=>{let o=performance.now();requestAnimationFrame((function a(l){let c=(l-o)/n;c>1&&(c=1);let r=e(c);t(r),c<1&&requestAnimationFrame(a)}))})({duration:1e3,timing:e=>e,draw(t){a.value=parseInt(t*e)}})})())}))})();const o=document.querySelectorAll("form");0!==o.length?o.forEach((e=>{t({formId:e.id,someElem:[{type:"input",id:"calc-total"}]})})):console.log("Упс.. Формы потерялись..")})();